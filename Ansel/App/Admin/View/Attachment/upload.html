<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="$public/css/bootstrap.min.css" rel="stylesheet">
<link href="$public/js/layui/css/layui.css" rel="stylesheet">
<link href="$public/js/webuploader/css/style.css" rel="stylesheet" type="text/css" />
<script src="$public/js/jquery.js"></script>
<script src="$public/js/layui/layui.js"></script>
<script src="$public/js/webuploader/js/webuploader.js"  type="text/javascript"></script>
<script src="$public/js/webuploader/js/upload.js"  type="text/javascript"></script>
<script>
$(function(){
	var config ={$uploadconfig};
	Manager.upload($.extend(config,{}))
});
</script>
</head>
<body>
<div class="upload-box"> 
  <ul class="webtabs">
    <li class="checked" id="upload_tab">本地上传</li>
    <li id="manage_tab">在线管理</li>
    <li id="search_tab">文件搜索</li>
  </ul>
  <div class="webcontainer">
    <div class="area upload-area area-checked" id="upload_area">
      <div id="uploader">
        <div class="statusBar" style="display:none;">
          <div class="progress"> <span class="text">0%</span> <span class="percentage"></span> </div>
          <div class="info"></div>
          <div class="btns">
            <div id="filePicker2"></div>
            <div class="uploadBtn">开始上传</div>
          </div>
        </div>
        <div class="queueList">
          <div id="dndArea" class="placeholder">
            <div id="filePicker"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="area manage-area" id="manage_area">
      <ul class="choose-btns">
        <li class="btn sure checked">确定</li>
      </ul>
      <div class="file-list">
        <ul id="file_all_list" style="overflow-x: hidden; overflow:hidden">
        </ul>
      </div>
    </div>
    <div class="area search-area" id="search_area">
      <ul class="choose-btns">
        <li class="search">
          <div class="search-condition">
            <input class="key" type="text" />
            <input class="submit" type="button" hidefocus="true" value="搜索" />
          </div>
        </li>
        <li class="btn sure checked">确定</li>
      </ul>
      <div class="file-list">
        <ul id="file_search_list" style="overflow-x: hidden; overflow:hidden">
        </ul>
      </div>
    </div>
  </div>
</div>
</body>
<script>
var hidoger = typeof this.hidoger == 'function' ? this.hidoger : function(){};
this.hidoger = hidoger;
var x = hidoger;
x.fileManager = (function(){
	var fm = {
		//文件的回调
		fileActive : function(fileUrl, data, allFiles){
			if(this.callback instanceof Function) this.callback(fileUrl, data, allFiles);
		},
		//上传完成
		uploadSuccess : function(file,response){
		//批量
	 	alert(response);
		if(ty_){
			var img_name =  response.name;
			if(imgval){
				img +=','+ img_name;

				addElementImg('imgval');
			}else{
				imgval=1;
				img = img_name;
				addElementImg('imgval');
			}
			$(id_class).val('/'+img);
			 
			function addElementImg(obj){
				var div = document.getElementById(obj);
				var img = document.createElement("img");
				img.setAttribute("class", "imgclass");
				//设置 img 图片地址
				img.src =  root+'/'+img_name;

				div.appendChild(img);
			}
			layer.closeAll();
			}else{ 
				//单个文件

				$(id_class).val('/'+response.name);
				$(id_class+'_img').attr('src',root+'/'+response.name);
				layer.closeAll();
			}
		}
	};
	return fm;
})();
</script>
</html>
